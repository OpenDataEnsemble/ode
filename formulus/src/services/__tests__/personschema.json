{
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "minLength": 3,
      "description": "Please enter your name"
    },
    "vegetarian": {
      "type": "boolean"
    },
    "birthDate": {
      "type": "string",
      "format": "date"
    },
    "nationality": {
      "type": "string",
      "enum": ["DE", "IT", "JP", "US", "Other"]
    },
    "personalData": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 3,
          "description": "Please enter your name"
        },
        "age": {
          "type": "integer",
          "description": "Please enter your age.",
          "minimum": 18,
          "maximum": 120
        },
        "height": {
          "type": "number",
          "minimum": 50,
          "maximum": 250,
          "description": "Height in centimeters"
        },
        "drivingSkill": {
          "type": "number",
          "maximum": 10,
          "minimum": 1,
          "default": 7
        }
      },
      "required": []
    },
    "occupation": {
      "type": "string",
      "enum": ["Student", "Employee", "Self-employed", "Retired", "Unemployed"]
    },
    "postalCode": {
      "type": "string",
      "maxLength": 5,
      "pattern": "^[0-9]{5}$"
    },
    "employmentDetails": {
      "type": "object",
      "properties": {
        "companyName": {
          "type": "string",
          "minLength": 2
        },
        "yearsOfExperience": {
          "type": "integer",
          "minimum": 0,
          "maximum": 50
        },
        "salary": {
          "type": "number",
          "minimum": 0,
          "maximum": 999999999,
          "errorMessage": {
            "maximum": "Salary must be less than 100.000 when age is below 40"
          }
        }
      },
      "required": []
    },
    "contactInfo": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "pattern": "^[0-9]{10}$"
        },
        "address": {
          "type": "string",
          "minLength": 5
        }
      },
      "required": []
    }
  },
  "required": ["name"],
  "allOf": [
    {
      "if": {
        "type": "object",
        "properties": {
          "occupation": {
            "type": "string",
            "enum": ["Student"]
          }
        }
      },
      "then": {
        "type": "object",
        "properties": {
          "personalData": {
            "type": "object",
            "properties": {
              "age": {
                "type": "integer",
                "maximum": 30
              }
            }
          }
        }
      }
    },
    {
      "if": {
        "type": "object",
        "properties": {
          "nationality": {
            "type": "string",
            "enum": ["DE"]
          }
        }
      },
      "then": {
        "type": "object",
        "properties": {
          "postalCode": {
            "type": "string",
            "pattern": "^[0-9]{5}$"
          }
        }
      }
    },
    {
      "if": {
        "type": "object",
        "properties": {
          "nationality": {
            "type": "string",
            "enum": ["US"]
          }
        }
      },
      "then": {
        "type": "object",
        "properties": {
          "postalCode": {
            "type": "string",
            "pattern": "^[0-9]{5}(-[0-9]{4})?$"
          }
        }
      }
    },
    {
      "if": {
        "type": "object",
        "properties": {
          "personalData": {
            "type": "object",
            "properties": {
              "age": {
                "type": "integer",
                "maximum": 40
              }
            }
          }
        }
      },
      "then": {
        "type": "object",
        "properties": {
          "employmentDetails": {
            "type": "object",
            "properties": {
              "salary": {
                "type": "number",
                "maximum": 100000
              }
            }
          }
        }
      }
    }
  ]
}
